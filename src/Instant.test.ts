import Instant, { RFC3339 } from '..'
import { expect } from 'chai'

function assert(iso: string, fmt: string, out: string) {
    it(`formats ${iso} ${fmt} to ${out}`, () => {
        const instant = new Instant(iso)
        const got = instant.format(fmt)
        expect(got).to.equal(out)
    })
}

describe('Instant', () => {
    assert('2020-03-07T11:17:42-00:00', 'YYYY', '2020')
    assert('2020-03-07T11:17:42-00:00', 'YY', '20')

    assert('2020-03-07T11:17:42-00:00', 'MMMM', 'March')
    assert('2020-03-07T11:17:42-00:00', 'MMM', 'Mar')
    assert('2020-03-07T11:17:42-00:00', 'MM', '03')
    assert('2020-03-07T11:17:42-00:00', 'M', '3')
    assert('2020-11-07T11:17:42-00:00', 'M', '11')

    assert('2020-03-07T11:17:42-00:00', 'DD', '07')
    assert('2020-03-07T11:17:42-00:00', 'D', '7')

    assert('2020-03-07T15:17:42-00:00', 'HH', '09')
    assert('2020-03-07T05:17:42-00:00', 'HH', '23')
    assert('2020-03-07T07:17:42-00:00', 'H', '1')
    assert('2020-03-07T17:17:42-00:00', 'H', '11')

    assert('2020-03-07T15:17:42-00:00', 'hh', '09')
    assert('2020-03-07T05:17:42-00:00', 'hh', '11')
    assert('2020-03-07T05:17:42-00:00', 'h', '11')
    assert('2020-03-07T15:17:42-00:00', 'h', '9')
    assert('2020-03-07T23:17:42-00:00', 'h', '5')
    assert('2020-03-07T05:17:42-00:00', 'h', '11')

    assert('2020-03-07T11:17:42-00:00', 'mm', '17')
    assert('2020-03-07T11:07:42-00:00', 'm', '7')
    assert('2020-03-07T11:17:42-00:00', 'm', '17')

    assert('2020-03-07T11:17:17-00:00', 'ss', '17')
    assert('2020-03-07T11:07:07-00:00', 's', '7')
    assert('2020-03-07T11:17:17-00:00', 's', '17')

    assert('2020-03-07T11:17:17.123-00:00', 'SSS', '123')
    assert('2020-03-07T11:07:07.023-00:00', 'SS', '02')
    assert('2020-03-07T11:17:17.123-00:00', 'S', '1')

    assert('2020-03-07T11:17:17.123-00:00', 'a', 'am')
    assert('2020-03-07T21:17:17.123-00:00', 'A', 'PM')

    // complex
    assert('2020-03-07T11:17:42-00:00', 'MMM D', 'Mar 7')
    assert('2020-03-07T11:17:42-00:00', 'MMM D, YYYY', 'Mar 7, 2020')
    assert('2020-03-07T11:17:42.123-00:00', 'h:mm:ss.SSS a MMM D, YYYY', '5:17:42.123 am Mar 7, 2020')
    assert('2020-03-07T11:17:42.123-00:00', RFC3339, '2020-03-07T05:17:42.123-06:00')
})